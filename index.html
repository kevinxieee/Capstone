<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BV02 Transactive Energy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

</head>
<body>
    <div class="container-fluid title justify-content-center">
        <h1>
            Transactive Energy Module with Storage
        </h1>
    </div>
    <!-- change name of div-->
    <div class="container-fluid optionsandgraphs">
        <div class="row">
            <div class="col-4 options">
                <div class="card" style="width: 20rem">
                    <div class="mx-auto">
                        <h3 class="card-title">Mode</h3>
                        <input type="radio" id="predictive" name="mode" value="predictive">
                        <label for="predictive">Predictive</label>
                        <br>
                        <input type="radio" id="historical" name="mode" value="historical">
                        <label for="historical">Historical</label>
                    </div>
                </div>
                <div class="card" style="width: 20rem">
                    <div class="mx-auto">
                        <h3 class="card-title">Forecasted Period</h3>
                        <input type="radio" id="week" name="forecast" value="week">
                        <label for="week">Week</label>
                        <br>
                        <input type="radio" id="month" name="forecast" value="month">
                        <label for="month">Month</label>
                        <br>
                        <input type="radio" id="year" name="forecast" value="year">
                        <label for="year">Year</label>
                    </div>
                </div>
                <div class="button">
                    <button type="button" class="btn btn-dark">Press Me</button>
                </div>
            </div>
            <div class="col-8 graph">
                <script>
                    async function getData(){
                        const hours = [];
                        const months1_2 = [];
                        const months3_4 = [];
                        const months5_6 = [];
                        const months7_8 = [];
                        const months9_10 = [];
                        const months11_12 = [];
                        const pcea = await fetch('pcea.csv');
                        const data = await pcea.text();

                        const table = data.split('\n').slice(1);
                        table.forEach(elt => {
                            const columns = elt.split(',');
                            hours.push(columns[0]);
                            months1_2.push(columns[1]);
                            months3_4.push(columns[2]);
                            months5_6.push(columns[3]);
                            months7_8.push(columns[4]);
                            months9_10.push(columns[5]);
                            months11_12.push(columns[6]);
                        });
                        return {hours, months1_2, months3_4, months5_6, months7_8, months9_10, months11_12};
                    }
                </script>
                <canvas id="chart" width="40" height="20"></canvas>
                <script>
                    chart();
                    async function chart(){
                        const data = await getData();
                        var ctx = document.getElementById('chart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: data.hours,
                                datasets: [
                                    {
                                        label: 'Month 1 and Month 2',
                                        data: data.months1_2,
                                        fill: false,
                                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                                        borderColor: 'rgba(255, 99, 132, 1)',
                                        borderWidth: 3
                                    },
                                    {
                                        label: 'Month 3 and Month 4',
                                        data: data.months3_4,
                                        fill: false,
                                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                        borderColor: 'rgba(54, 162, 235, 1)',
                                        borderWidth: 3
                                    },
                                    {
                                        label: 'Month 5 and Month 6',
                                        data: data.months5_6,
                                        fill: false,
                                        backgroundColor: 'rgba(255, 206, 86, 0.2)',
                                        borderColor: 'rgba(255, 206, 86, 1)',
                                        borderWidth: 3
                                    },
                                    {
                                        label: 'Month 7 and Month 8',
                                        data: data.months7_8,
                                        fill: false,
                                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                                        borderColor: 'rgba(75, 192, 192, 1)',
                                        borderWidth: 3
                                    },
                                    {
                                        label: 'Month 9 and Month 10',
                                        data: data.months9_10,
                                        fill: false,
                                        backgroundColor: 'rgba(153, 102, 255, 0.2)',
                                        borderColor: 'rgba(153, 102, 255, 1)',
                                        borderWidth: 3
                                    },
                                    {
                                        label: 'Month 11 and Month 12',
                                        data: data.months11_12,
                                        fill: false,
                                        backgroundColor: 'rgba(255, 159, 64, 0.2)',
                                        borderColor: 'rgba(255, 159, 64, 1)',
                                        borderWidth: 3
                                    }
                                ]
                            },
                            options: {
                                title: {
                                    display: true,
                                    text: 'PCEA'
                                },
                                scales: {
                                    xAxes: [{
                                        scaleLabel: {
                                            display: true,
                                            labelString: 'Hour'
                                        }
                                    }],
                                    yAxes: [{
                                        scaleLabel: {
                                            display: true,
                                            labelString: 'kW'
                                        }
                                    }]
                                }
                            }
                        });
                    }
                </script>
                <button onclick="toggle()">show/hide all</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
</body>
</html>